## 도전 과제

모든 비즈니스 기능이 어떤 조건에 따라 액션을 유발하는 규칙을 정의할 수 있어야 한다.

예를 들어 '잠재 고객의 직함이 CEO면 영업 팀에게 알림' 등과 같은 기능이다.

기술 팀과 비즈니스 팀이 함께 뭔가를 만들 수 있는 비즈니스 규칙 엔진을 직접 구현한다.

비즈니스 규칙 엔진을 완성하면 비즈니스 팀에서 직접 우너하는 규칙을 만들 수 있으므로 생산성을 높이고 새로운 규칙을 구현하는 시간을 단축할 수 있다.

---

## 목표

TDD 기법을 사용해 새로운 설계 문제를 풀어나가는 방법을 사용한다.
그리고 유닛 테스트를 구현하는 데 유용한 모킹 기법도 전반적으로 사용한다.
지역 변수 형식 추론, switch 문 등 몇 가지 최신 자바 기능도 살펴본다.
마지막으로 빌더 패턴과 인터페이스 분리 원칙으로 사용자 친화적인 API 개발 방법을 사용한다.

---

## 요구사항
프로그래머가 아닌 사람도 자신의 워크플로에 비즈니스 로직을 추가하거나 바꿀 수 있는 기능을 만들려 한다.
> 예를 들어 마케팅 부서장은 한 제품에 관심이 쏠리면서 어떤 조건을 만족할 때 특별 할인을 제공하고 싶어하고 회계 부서장은 지출이 평소보다 높을 때 알람을 만들고 싶어한다.

비즈니스 규칙 엔진은 간단한 맞춤 언어를 사용해 한 개 이상의 비즈니스 규칙을 실행하는 소프트웨어로 다양한 컴포넌트를 동시에 지원한다.

- **팩트** : 규칙이 확인할 수 있는 정보
- **액션** : 수행하려는 동작
- **조건** : 액션을 언제 발생시킬지 지정
- **규칙** : 실행하려는 비즈니스 규칙을 지정, 보통 팩트, 액션, 조건을 한 그룹으로 묶어 규칙으로 만듦

---

## TDD (테스트 주도 개발)

아직 요구 사항이 확정되지 않은 유동적인 상태이므로 사용자가 수행할 기본 기능부터 나열해보자.

- 액션 추가
- 액션 실행
- 기본 보고

### TDD를 사용하는 이유

- 테스트를 따로 구현하므로 테스트에 대응하는 요구 사항을 한 개씩 구현할 때마다 필요한 요구 사항에 집중하고 개선할 수 있다.
- 코드를 올바르게 조작할 수 있다. 예를 들어 먼저 테스트를 구현하면서 코드에 어떤 공개 인터페이스를 만들어야 하는지 신중히 검토하게 된다.
- TDD 주기에 따라 요구사항 구현을 반복하면서 종합적인 테스트 스위트를 완성할 수 있으므로 요구사항을 만족시켰다는 사실을 조건 더 확신할 수 있으며 버그 발생 범위도 줄일 수 있다.
- 테스트를 통과하기 위한 코드를 구현하기 때문에 필요하지 않은 테스트를 구현하는 일(오버 엔지니어링)을 줄일 수 있다.

### TDD 주기

1. 실패하는 테스트 구현
2. 모든 테스트 실행
3. 기능이 동작하도록 코드 구현
4. 모든 테스트 실행
5. 

